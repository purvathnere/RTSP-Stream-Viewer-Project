{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\colne rstp\\\\rtsp-stream-viewer\\\\frontend\\\\src\\\\videoplayer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport Hls from 'hls.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst backendUrl = 'http://localhost:8000'; // Backend server ka URL\n\nconst VideoPlayer = ({\n  streamId\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !streamId) return;\n    if (Hls.isSupported()) {\n      const hls = new Hls();\n      // hls.loadSource(`${backendUrl}/media/streams/${streamId}/index.m3u8`);\n      hls.loadSource(`${backendUrl}/media/streams/index.m3u8`);\n      // http://127.0.0.1:8000/media/streams/camera1//index.m3u8\n      // 1347217d-5cd2-46c3-8de2-b65e582393e4\n\n      hls.attachMedia(video);\n      hls.on(Hls.Events.MANIFEST_PARSED, () => {\n        video.play();\n      });\n    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\n      //video.src = `${backendUrl}/media/streams/${streamId}/index.m3u8`;\n      video.src = `${backendUrl}/media/streams/index.m3u8`;\n      video.addEventListener('loadedmetadata', () => {\n        video.play();\n      });\n    }\n  }, [streamId]);\n  return /*#__PURE__*/_jsxDEV(\"video\", {\n    ref: videoRef,\n    controls: true,\n    style: {\n      width: '100%',\n      maxWidth: '600px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 10\n  }, this);\n};\n_s(VideoPlayer, \"PdMsmLAy5JKU3vCrhAlqGYQfKuA=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","Hls","jsxDEV","_jsxDEV","backendUrl","VideoPlayer","streamId","_s","videoRef","video","current","isSupported","hls","loadSource","attachMedia","on","Events","MANIFEST_PARSED","play","canPlayType","src","addEventListener","ref","controls","style","width","maxWidth","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/Desktop/colne rstp/rtsp-stream-viewer/frontend/src/videoplayer.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport Hls from 'hls.js';\r\n\r\ninterface VideoPlayerProps {\r\n  streamId: string;\r\n}\r\n\r\nconst backendUrl = 'http://localhost:8000'; // Backend server ka URL\r\n\r\nconst VideoPlayer: React.FC<VideoPlayerProps> = ({ streamId }) => {\r\n  const videoRef = useRef<HTMLVideoElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (!video || !streamId) return;\r\n\r\n    if (Hls.isSupported()) {\r\n      const hls = new Hls();\r\n     // hls.loadSource(`${backendUrl}/media/streams/${streamId}/index.m3u8`);\r\n     hls.loadSource(`${backendUrl}/media/streams/index.m3u8`);\r\n     // http://127.0.0.1:8000/media/streams/camera1//index.m3u8\r\n     // 1347217d-5cd2-46c3-8de2-b65e582393e4\r\n\r\n      hls.attachMedia(video);\r\n      hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        video.play();\r\n      });\r\n    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\r\n      //video.src = `${backendUrl}/media/streams/${streamId}/index.m3u8`;\r\n      video.src = `${backendUrl}/media/streams/index.m3u8`;\r\n      video.addEventListener('loadedmetadata', () => {\r\n        video.play();\r\n      });\r\n    }\r\n  }, [streamId]);\r\n\r\n  return <video ref={videoRef} controls style={{ width: '100%', maxWidth: '600px' }} />;\r\n};\r\n\r\nexport default VideoPlayer;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,GAAG,MAAM,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAMzB,MAAMC,UAAU,GAAG,uBAAuB,CAAC,CAAC;;AAE5C,MAAMC,WAAuC,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAChE,MAAMC,QAAQ,GAAGR,MAAM,CAA0B,IAAI,CAAC;EAEtDD,SAAS,CAAC,MAAM;IACd,MAAMU,KAAK,GAAGD,QAAQ,CAACE,OAAO;IAC9B,IAAI,CAACD,KAAK,IAAI,CAACH,QAAQ,EAAE;IAEzB,IAAIL,GAAG,CAACU,WAAW,CAAC,CAAC,EAAE;MACrB,MAAMC,GAAG,GAAG,IAAIX,GAAG,CAAC,CAAC;MACtB;MACAW,GAAG,CAACC,UAAU,CAAC,GAAGT,UAAU,2BAA2B,CAAC;MACxD;MACA;;MAECQ,GAAG,CAACE,WAAW,CAACL,KAAK,CAAC;MACtBG,GAAG,CAACG,EAAE,CAACd,GAAG,CAACe,MAAM,CAACC,eAAe,EAAE,MAAM;QACvCR,KAAK,CAACS,IAAI,CAAC,CAAC;MACd,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIT,KAAK,CAACU,WAAW,CAAC,+BAA+B,CAAC,EAAE;MAC7D;MACAV,KAAK,CAACW,GAAG,GAAG,GAAGhB,UAAU,2BAA2B;MACpDK,KAAK,CAACY,gBAAgB,CAAC,gBAAgB,EAAE,MAAM;QAC7CZ,KAAK,CAACS,IAAI,CAAC,CAAC;MACd,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACZ,QAAQ,CAAC,CAAC;EAEd,oBAAOH,OAAA;IAAOmB,GAAG,EAAEd,QAAS;IAACe,QAAQ;IAACC,KAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,QAAQ,EAAE;IAAQ;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACvF,CAAC;AAACvB,EAAA,CA5BIF,WAAuC;AAAA0B,EAAA,GAAvC1B,WAAuC;AA8B7C,eAAeA,WAAW;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}