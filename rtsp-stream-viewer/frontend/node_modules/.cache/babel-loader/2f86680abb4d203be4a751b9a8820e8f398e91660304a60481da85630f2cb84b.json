{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\colne rstp\\\\rtsp-stream-viewer\\\\frontend\\\\src\\\\videoplayer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport Hls from 'hls.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoPlayer = ({\n  streamId\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  useEffect(() => {\n    var _videoRef$current;\n    console.log('VideoPlayer useEffect called for stream:', streamId);\n    let hls = null;\n    if (Hls.isSupported() && videoRef.current) {\n      console.log(\"Initializing HLS for stream:\", streamId);\n      hls = new Hls();\n      hls.loadSource(`http://127.0.0.1:8000/media/streams/${streamId}/index.m3u8`);\n      hls.attachMedia(videoRef.current);\n\n      // Cleanup when component unmounts or streamId changes\n      return () => {\n        var _hls;\n        console.log(\"Destroying HLS instance for stream:\", streamId);\n        (_hls = hls) === null || _hls === void 0 ? void 0 : _hls.destroy();\n      };\n    } else if ((_videoRef$current = videoRef.current) !== null && _videoRef$current !== void 0 && _videoRef$current.canPlayType('application/vnd.apple.mpegurl')) {\n      // Fallback for Safari or native HLS support\n      videoRef.current.src = `http://127.0.0.1:8000/media/streams/${streamId}/index.m3u8`;\n    }\n  }, [streamId]);\n  return /*#__PURE__*/_jsxDEV(\"video\", {\n    ref: videoRef,\n    controls: true,\n    autoPlay: true,\n    style: {\n      width: '600px',\n      border: '1px solid black'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoPlayer, \"PdMsmLAy5JKU3vCrhAlqGYQfKuA=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","Hls","jsxDEV","_jsxDEV","VideoPlayer","streamId","_s","videoRef","_videoRef$current","console","log","hls","isSupported","current","loadSource","attachMedia","_hls","destroy","canPlayType","src","ref","controls","autoPlay","style","width","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/Desktop/colne rstp/rtsp-stream-viewer/frontend/src/videoplayer.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport Hls from 'hls.js';\r\n\r\ninterface VideoPlayerProps {\r\n  streamId: string;\r\n}\r\n\r\nconst VideoPlayer: React.FC<VideoPlayerProps> = ({ streamId }) => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n\r\n  useEffect(() => {\r\n    console.log('VideoPlayer useEffect called for stream:', streamId);\r\n    \r\n    let hls: Hls | null = null;\r\n\r\n    if (Hls.isSupported() && videoRef.current) {\r\n      console.log(\"Initializing HLS for stream:\", streamId);\r\n      hls = new Hls();\r\n      hls.loadSource(`http://127.0.0.1:8000/media/streams/${streamId}/index.m3u8`);\r\n      hls.attachMedia(videoRef.current);\r\n\r\n      // Cleanup when component unmounts or streamId changes\r\n      return () => {\r\n        console.log(\"Destroying HLS instance for stream:\", streamId);\r\n        hls?.destroy();\r\n      };\r\n    } else if (videoRef.current?.canPlayType('application/vnd.apple.mpegurl')) {\r\n      // Fallback for Safari or native HLS support\r\n      videoRef.current.src = `http://127.0.0.1:8000/media/streams/${streamId}/index.m3u8`;\r\n    }\r\n  }, [streamId]);\r\n\r\n  return (\r\n    <video\r\n      ref={videoRef}\r\n      controls\r\n      autoPlay\r\n      style={{ width: '600px', border: '1px solid black' }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default VideoPlayer;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,GAAG,MAAM,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAMzB,MAAMC,WAAuC,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAChE,MAAMC,QAAQ,GAAGP,MAAM,CAAmB,IAAI,CAAC;EAE/CD,SAAS,CAAC,MAAM;IAAA,IAAAS,iBAAA;IACdC,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAEL,QAAQ,CAAC;IAEjE,IAAIM,GAAe,GAAG,IAAI;IAE1B,IAAIV,GAAG,CAACW,WAAW,CAAC,CAAC,IAAIL,QAAQ,CAACM,OAAO,EAAE;MACzCJ,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEL,QAAQ,CAAC;MACrDM,GAAG,GAAG,IAAIV,GAAG,CAAC,CAAC;MACfU,GAAG,CAACG,UAAU,CAAC,uCAAuCT,QAAQ,aAAa,CAAC;MAC5EM,GAAG,CAACI,WAAW,CAACR,QAAQ,CAACM,OAAO,CAAC;;MAEjC;MACA,OAAO,MAAM;QAAA,IAAAG,IAAA;QACXP,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEL,QAAQ,CAAC;QAC5D,CAAAW,IAAA,GAAAL,GAAG,cAAAK,IAAA,uBAAHA,IAAA,CAAKC,OAAO,CAAC,CAAC;MAChB,CAAC;IACH,CAAC,MAAM,KAAAT,iBAAA,GAAID,QAAQ,CAACM,OAAO,cAAAL,iBAAA,eAAhBA,iBAAA,CAAkBU,WAAW,CAAC,+BAA+B,CAAC,EAAE;MACzE;MACAX,QAAQ,CAACM,OAAO,CAACM,GAAG,GAAG,uCAAuCd,QAAQ,aAAa;IACrF;EACF,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEd,oBACEF,OAAA;IACEiB,GAAG,EAAEb,QAAS;IACdc,QAAQ;IACRC,QAAQ;IACRC,KAAK,EAAE;MAAEC,KAAK,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAkB;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtD,CAAC;AAEN,CAAC;AAACvB,EAAA,CAjCIF,WAAuC;AAAA0B,EAAA,GAAvC1B,WAAuC;AAmC7C,eAAeA,WAAW;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}